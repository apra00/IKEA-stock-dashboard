{% extends "base.html" %}
{% block title %}{{ 'Edit' if user else 'Add' }} User â€“ IKEA Availability{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-5">
    <div class="card shadow-sm">
      <div class="card-body">
        <h3 class="card-title mb-3">{{ 'Edit' if user else 'Add' }} user</h3>
        <form method="post">
          {{ csrf_token() }}
          <div class="mb-3">
            <label class="form-label">Username</label>
            <input name="username" class="form-control"
                   value="{{ user.username if user else '' }}"
                   {% if user %}readonly{% else %}required{% endif %}>
          </div>
          <div class="mb-3">
            <label class="form-label">Email (for notifications)</label>
            <input name="email" type="email" class="form-control"
                   value="{{ user.email if user and user.email else '' }}">
            <div class="form-text">
              If set, this address will receive stock alert emails for items with notifications enabled.
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Role</label>
            <select name="role" class="form-select">
              <option value="admin" {% if user and user.role=='admin' %}selected{% endif %}>admin</option>
              <option value="user" {% if not user or user.role=='user' %}selected{% endif %}>user</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">
              {{ 'New password (leave blank to keep)' if user else 'Password' }}
            </label>
            <input name="password" type="password" class="form-control" {% if not user %}required{% endif %}>
          </div>
          <button class="btn btn-primary" type="submit">Save</button>
          <a class="btn btn-secondary" href="{{ url_for('users.list_users') }}">Cancel</a>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
